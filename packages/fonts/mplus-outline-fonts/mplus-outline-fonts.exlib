# Copyright 2012 NAKAMURA Yoshitaka
# Distributed under the terms of the GNU General Public License v2

MY_PNV="mplus-TESTFLIGHT-${PV}"
PROJ_NAME="mplus-fonts"

FONT="M+"

require xfont

SUMMARY="M+ Japanese outline fonts"
HOMEPAGE="http://mplus-fonts.sourceforge.jp/mplus-outline-fonts/"
DOWNLOADS="mirror://sourceforge.jp/${PROJ_NAME}/${SRC_NR}/${MY_PNV}.tar.xz"

LICENCES="M+"
SLOT="0"
MYOPTIONS=""

DEPENDENCIES="
    build:
        media-gfx/fontforge[native-script]
        fonts/IPAfont
"

WORK="${WORKBASE}/${MY_PNV}"

src_compile() {
    ln -s /usr/share/fonts/X11/IPAfont/ipag.ttf .
    fontforge -script m++ipa.pe
}

src_install() {
    insinto /usr/share/fonts/X11/${FONT}
    doins *+IPAG.ttf
    fix_fonts
}

